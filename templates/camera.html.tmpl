<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="view-transition" content="same-origin">
    
    <!-- Page Title -->
    <title>{{.Camera.Alt}} | {{.CanyonName}} Live Camera</title>
    
    <!-- SEO & Social -->
    <meta name="description" content="Live camera view from {{.Camera.Alt}} in {{if eq .CanyonName "LCC"}}Little Cottonwood Canyon{{else}}Big Cottonwood Canyon{{end}}. Real-time road conditions and weather updates.">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://lcc.live/camera/{{.Camera.ID}}">
    <meta property="og:title" content="{{.Camera.Alt}} | {{.CanyonName}} Live Camera">
    <meta property="og:description" content="Live camera view from {{.Camera.Alt}} in {{if eq .CanyonName "LCC"}}Little Cottonwood Canyon{{else}}Big Cottonwood Canyon{{end}}.">
    <meta property="og:image" content="https://lcc.live{{.ImageURL}}">
    <meta property="og:image:alt" content="{{.Camera.Alt}}">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://lcc.live/camera/{{.Camera.ID}}">
    <meta name="twitter:title" content="{{.Camera.Alt}} | {{.CanyonName}} Live Camera">
    <meta name="twitter:description" content="Live camera view from {{.Camera.Alt}} in {{if eq .CanyonName "LCC"}}Little Cottonwood Canyon{{else}}Big Cottonwood Canyon{{end}}.">
    <meta name="twitter:image" content="https://lcc.live{{.ImageURL}}">
    
    <!-- Mobile Optimization -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="{{.CanyonName}} Live">
    <meta name="theme-color" content="#667eea">
    
    <!-- Resources -->
    <link rel="stylesheet" href="/s/style.css">
    <link rel="icon" type="image/png" href="/s/favicon.png">
    
    <!-- Prefetch canyon page -->
    <link rel="prefetch" href="{{.CanyonPath}}" as="document">
    
    <!-- Preconnect for analytics -->
    <link rel="preconnect" href="https://www.googletagmanager.com">
    
    <style>
      /* Photo detail page specific styles */
      .photo-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 1rem;
      }
      
      .back-link {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--primary-color, #667eea);
        text-decoration: none;
        font-size: 1rem;
        margin-bottom: 1rem;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: background-color 0.2s ease;
      }
      
      .back-link:hover {
        background-color: rgba(102, 126, 234, 0.1);
      }
      
      .back-link svg {
        width: 20px;
        height: 20px;
      }
      
      .photo-header {
        text-align: center;
        margin-bottom: 1.5rem;
      }
      
      .photo-header h1 {
        font-size: 2rem;
        margin: 0.5rem 0;
        color: var(--text-color, #1a202c);
      }
      
      .photo-header .canyon-badge {
        display: inline-block;
        padding: 0.25rem 0.75rem;
        background: var(--primary-color, #667eea);
        color: white;
        border-radius: 999px;
        font-size: 0.875rem;
        font-weight: 600;
      }
      
      .photo-main {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1rem;
      }
      
      .photo-frame {
        width: 100%;
        max-width: 1200px;
        background: var(--card-bg, white);
        border-radius: 12px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        overflow: hidden;
      }
      
      .photo-frame img {
        width: 100%;
        height: auto;
        display: block;
      }
      
      .share-section {
        text-align: center;
        padding: 1rem;
      }
      
      .share-section p {
        color: var(--text-muted, #718096);
        font-size: 0.875rem;
        margin-bottom: 0.5rem;
      }
      
      .share-buttons {
        display: flex;
        justify-content: center;
        gap: 0.5rem;
        flex-wrap: wrap;
      }
      
      .share-btn {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        text-decoration: none;
        font-size: 0.875rem;
        font-weight: 500;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }
      
      .share-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }
      
      .share-btn.twitter {
        background: #1DA1F2;
        color: white;
      }
      
      .share-btn.facebook {
        background: #1877F2;
        color: white;
      }
      
      .share-btn.whatsapp {
        background: #25D366;
        color: white;
      }
      
      .share-btn.telegram {
        background: #0088cc;
        color: white;
      }
      
      .share-btn.copy {
        background: var(--card-bg, #edf2f7);
        color: var(--text-color, #1a202c);
        border: 1px solid var(--border-color, #e2e8f0);
      }
      
      @media (max-width: 768px) {
        .photo-header h1 {
          font-size: 1.5rem;
        }
        
        .share-buttons {
          flex-direction: column;
          align-items: stretch;
        }
        
        .share-btn {
          justify-content: center;
        }
      }
    </style>
  </head>
  
  <body>
    <!-- Main Header -->
    <header role="banner">
      <!-- Canyon Navigation with Theme Toggle -->
      <nav class="canyon-nav" role="navigation" aria-label="Canyon selection">
        <div class="canyon-toggle">
        {{ if eq .CanyonName "LCC" -}}
        <a href="/" 
           aria-current="page" 
           class="active" 
           role="button"
           aria-label="Little Cottonwood Canyon, currently selected">
          LCC
        </a>
        <a href="/bcc" 
           role="button"
           aria-label="Switch to Big Cottonwood Canyon">
          BCC
        </a>
        {{- else -}}
        <a href="/" 
           role="button"
           aria-label="Switch to Little Cottonwood Canyon">
          LCC
        </a>
        <a href="/bcc" 
           aria-current="page" 
           class="active" 
           role="button"
           aria-label="Big Cottonwood Canyon, currently selected">
          BCC
        </a>
        {{- end -}}
        </div>
        
        <!-- Theme Toggle Button -->
        <button class="theme-toggle" aria-label="Toggle dark mode" title="Toggle theme">
          <svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
          </svg>
          <svg class="icon-moon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
          </svg>
        </button>
      </nav>
    </header>
    
    <!-- Photo Detail -->
    <main role="main">
      <div class="photo-container">
        <a href="{{.CanyonPath}}" class="back-link">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
          </svg>
          Back to {{.CanyonName}} Cameras
        </a>
        
        <div class="photo-header">
          <span class="canyon-badge">{{.CanyonName}}</span>
          <h1>{{.Camera.Alt}}</h1>
        </div>
        
        <div class="photo-main">
          <div class="photo-frame">
            <img 
              src="{{.ImageURL}}" 
              alt="{{.Camera.Alt}}"
              loading="eager"
              decoding="async">
          </div>
          
          <div class="share-section">
            <p>Share this camera view:</p>
            <div class="share-buttons">
              <a href="#" class="share-btn twitter" id="share-twitter" target="_blank" rel="noopener noreferrer">
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                </svg>
                Twitter
              </a>
              <a href="#" class="share-btn facebook" id="share-facebook" target="_blank" rel="noopener noreferrer">
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                </svg>
                Facebook
              </a>
              <a href="#" class="share-btn whatsapp" id="share-whatsapp" target="_blank" rel="noopener noreferrer">
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
                </svg>
                WhatsApp
              </a>
              <a href="#" class="share-btn telegram" id="share-telegram" target="_blank" rel="noopener noreferrer">
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>
                </svg>
                Telegram
              </a>
              <button class="share-btn copy" id="copy-link">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                </svg>
                Copy Link
              </button>
            </div>
          </div>
        </div>
      </div>
    </main>
    
    <!-- Scripts -->
    <script src="/s/script.js" defer></script>
    
    <!-- Share functionality -->
    <script>
      // Get current page URL
      const pageUrl = window.location.href;
      const pageTitle = document.title;
      
      // Twitter share
      document.getElementById('share-twitter').addEventListener('click', function(e) {
        e.preventDefault();
        const url = `https://twitter.com/intent/tweet?url=${encodeURIComponent(pageUrl)}&text=${encodeURIComponent(pageTitle)}`;
        window.open(url, '_blank', 'width=550,height=420');
      });
      
      // Facebook share
      document.getElementById('share-facebook').addEventListener('click', function(e) {
        e.preventDefault();
        const url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(pageUrl)}`;
        window.open(url, '_blank', 'width=550,height=420');
      });
      
      // WhatsApp share
      document.getElementById('share-whatsapp').addEventListener('click', function(e) {
        e.preventDefault();
        const url = `https://wa.me/?text=${encodeURIComponent(pageTitle + ' ' + pageUrl)}`;
        window.open(url, '_blank');
      });
      
      // Telegram share
      document.getElementById('share-telegram').addEventListener('click', function(e) {
        e.preventDefault();
        const url = `https://t.me/share/url?url=${encodeURIComponent(pageUrl)}&text=${encodeURIComponent(pageTitle)}`;
        window.open(url, '_blank');
      });
      
      // Copy link
      document.getElementById('copy-link').addEventListener('click', async function() {
        try {
          await navigator.clipboard.writeText(pageUrl);
          const btn = this;
          const originalText = btn.innerHTML;
          btn.innerHTML = '<svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg>Copied!';
          setTimeout(() => {
            btn.innerHTML = originalText;
          }, 2000);
        } catch (err) {
          console.error('Failed to copy:', err);
        }
      });
    </script>
    
    <!-- Analytics (async, non-blocking) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EKMJ5GKF38"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-EKMJ5GKF38', {
        'send_page_view': true,
        'page_title': '{{.Camera.Alt}} Camera'
      });
    </script>
  </body>
</html>
